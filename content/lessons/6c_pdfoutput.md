---
numbering:
  title:
    offset: 1
---

# Create a PDF ðŸŒ¶

With a general understanding of document creation using MyST and our choice to use Typst for PDF generation, you are ready to create a PDF from your book repository using Jupyter Book.

In this lesson, we will:
- Install Typst (or use it within a GitHub Action workflow if working online-only)
- Generate a PDF using the `lapreprint-typst` template
- Set up and use the `plain_typst_book` template
- Modify the GitHub Action workflow to generate a PDF
- Explore how the PDF can be customized and shared via the book website

```{warning}
To complete this lesson locally, you will need to install Typst. If this is not possible, or you are following the online-only path, you can complete the exercises using GitHub Actions. The exercises in this lesson use **Local** and **GitHub Actions** to distinguish instructions for each case.
```

## Install Typst

To produce a PDF output locally, you need to have Typst installed on your system. 

````{exercise} Install Typst

::::{tab-set} 
:::{tab-item} Local

Install Typst using the nstructions available at the [Typst GitHub repo](https://github.com/typst/typst?tab=readme-ov-file#installation) and Jupyter Book 2 context is provided [here](xref:myst-guide/creating-pdf-documents#typst-install).

Check whether Typst is correctly installed by running the following command in your terminal:

```console
typst --version
```
:::
:::{tab-item} GitHub Actions

Until you get to the Lesson "PDF output with GH Actions" you won't be generating PDF's, but you can still learn how the template is defined and used by Juypter Book.

:::
::::
````

## Generate a PDF

Once Typst is installed and available in your terminal it can be used with Jupyter Book to generate a PDF file.


````{exercise} Generate a PDF of your book

::::{tab-set} 
:::{tab-item} Local

Generate a PDF using the command `jupyter book build --pdf`.

View the PDF and observe how the contents of your website are formatted in the PDF document.

Next, review the contents of the `myst.yml` file and answer the following questions:
- What template is being used?
- Where is the PDF output file saved after being generated?
:::
:::{tab-item} GitHub Actions

Review the contents of the `myst.yml` file and answer the following questions:
- What template is being used?
- Where is the PDF output file saved after being generated?
:::
::::
````


```{tip} Good practice with PDFs and Git
Git is not intended for use with binary files like PDF's. When working with PDF's locally you may be tempted to commit the generated file to your repository, especially if you intend to share your work online. However, this will lead to unecessary large Git workspace and is not recommended. For this reason the `.gitignore`  file already ignores PDF files, and the upcoming exercise with GH Actions illustrates how a PDF can be generated online and saved as a downloadable artifact, rather than committing it to the repository.
```

## Change the PDF template

As seen in the previous exercise, the PDF generated by the `lapreprint-typst` template is not ideal for rendering content designed as a website made with the `book-theme`. Luckily, another Typst template is available: [the Plain Typst Book `plain_typst_book`](https://github.com/myst-templates/plain_typst_book) (not yet listed on the MyST Templates GH Organization). An example YAML snippet that implements this in the `myst.yml` file is illustrated here:

```yaml
  exports:
    - format: typst
      template: https://github.com/myst-templates/plain_typst_book.git
      output: exports/book.pdf
      id: output-pdf
      cover: content/figures/logo.svg
      logo: content/figures/logo.svg
      logo_width: 5
      ToC_depth: 2
```


````{exercise} Change the template

::::{tab-set} 
:::{tab-item} Local

Using the example code provided above, update your `myst.yml` file to use the `plain_typst_book` template in your book, then rebuild the PDF.

Observe how the rendered PDF is different than the previous template.
:::
:::{tab-item} GitHub Actions

Using the example code provided above, update your `myst.yml` file to use the `plain_typst_book` template in your book. Although you will commit this in your repository, the PDF still won't be generated until completing the next exercise.

:::
::::
````

(section:pdf-with-gha)=
## PDF output with GH Actions

Building and including your PDF is possible through a GitHub action that automatically builds the PDF when you push changes to GitHub. This has both is pros and cons. For instance, the build of your PDF is done prior to the build of your book, and if there is an error in the workflow your website may not be updated, or the PDF may not be included as a download. On the other hand, you do not need to install anything locally and the PDF is always up to date when you push changes. The workflow steps are:

```yaml
    # Install Typst for PDF generation
    - name: Install Typst
      run: |
        typst --version

    # Build the PDF using Typst
    - name: Build PDF
      run: |
        myst build --typst
```

````{exercise} Change the workflow

::::{tab-set} 
:::{tab-item} Local

Using the example code provided above, update your `deploy.yml` file to build the PDF as part of your GitHub Action workflow.

Visit the Actions page of your repository to find where the artifact (PDF) can be downloaded.
:::
:::{tab-item} GitHub Actions

Using the example code provided above, update your `deploy.yml` file to build the PDF as part of your GitHub Action workflow.

Visit the Actions page of your repository to find where the artifact (PDF) can be downloaded.
:::
::::
````

## More fun with PDF's

**WIP**

add MyST action button, add download on page.

Upload as artifact (GHA only). This can be done even if the website build fails.
